<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta name="description" content="Web site created using create-react-app" />
    <link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png" />
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
    
    <!-- Load OpenCV.js from the official OpenCV documentation -->
    <script
      async
      src="https://docs.opencv.org/4.9.0/opencv.js"
      onload="onOpenCVLoaded()"
      onerror="onOpenCVError()"
      type="text/javascript"
    ></script>

    <title>Real-Time Edge Detection Demo</title>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
    <script>
      function onOpenCVLoaded() {
        console.log("OpenCV.js script loaded successfully");
        if (typeof cv === "undefined") {
          console.error("cv is not defined after script load. OpenCV.js may have failed to initialize.");
          return;
        }
        cv.onRuntimeInitialized = () => {
          console.log("OpenCV.js fully initialized");
          console.log("cv.matFromImageData exists:", typeof cv.matFromImageData === "function");
          window.cvReady = true; // Set a global flag for React to check
        };
      }

      function onOpenCVError() {
        console.error("Failed to load OpenCV.js from OpenCV documentation. Check network or URL availability.");
      }
    </script>
  </body>
</html>